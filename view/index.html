<!DOCTYPE html>
<html lang="en">
<head>
  <title>Visual Analytics ToolKit</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
  <script src="../d3.min.js"></script>
  <style>
  .head{
    height: 100px;
    padding: 10px;
    margin-bottom:0
  }
  .footer{
    height: 30px;
    background-color: rgb(185, 183, 183);
    margin: 0px;
  }
  .bg-dark{
    background-color: #222222;
  }
  </style>
</head>
<body>

<nav class="navbar navbar-inverse navbar-fixed-top">
  <a class="navbar-brand" href="#">Visual Analytics ToolKit</a>
</nav>

<div class="container" style="margin-top:70px">
  <div class="row" style="padding-bottom: 10px; position: fixed;">
    <form action="index.js" method="post" enctype="multipart/form-data">
      <input type="file" name="dataFile" id="myFile" style="padding: 10px;">
    </form>
  </div>
  <div class="row">
    <div class="col-sm-4" style="position: fixed; margin-top: 100px; float: left">
      <h3>Analysers</h3>
      <p>Select one of the following.</p>
      <ul class="nav">
        <li class="nav-item active">
          <a class="nav-link" href="#" style="padding: 0px 10px 0px 10px;">Network Graph</a>
        </li>
        <br>
        <li class="nav-item">
          <a class="nav-link" href="#" style="padding: 0px 10px 0px 10px;">Bar Graph</a>
        </li>
      </ul>
    </div>
    <div class="col-sm-8" style="margin-top: 30px; float:right">
      <h2>Network Graph</h2>
      <h5>Total Time taken to generate this</h5>
      <div id="graph">
        <svg id="svg_graph"></svg>
      </div>
      <p>Description..</p>
      <p>Description of the visualization.</p>
      <br>
    </div>
  </div>
</div>

<div class="footer text-center bg-dark" style="margin-bottom:0; bottom:0px; position: fixed; width: 100%">
  <p style="color: white; font-size: 12px; margin: 0px; padding: 5px">&#169;COPYRIGHT @CKIDS2019</p>
</div>

<script type="text/javascript">
  // set the dimensions and margins of the graph
  var margin = {
          top: 20,
          right: 20,
          bottom: 20,
          left: 20
      },
      width = 400,
      height = 400;

  // append the svg object to the body of the page
  var svg = d3.select("#svg_graph")
      .attr("width", width)
      .attr("height", height)
      .append("g")
      .attr("transform",
          "translate(" + margin.left + "," + margin.top + ")");

  d3.json("../data/data_network.json").then(function(data) {

      // Initialize the links
      var link = svg
          .selectAll("line")
          .data(data.links)
          .enter()
          .append("line")
          .style("stroke", "red")

      // Initialize the nodes
      var node = svg
          .selectAll("circle")
          .data(data.nodes)
          .enter()
          .append("circle")
          .attr("r", 15)
          .style("fill", "red")

      // Let's list the force we wanna apply on the network
      var simulation = d3.forceSimulation(data.nodes) // Force algorithm is applied to data.nodes
          .force("link", d3.forceLink() // This force provides links between nodes
              .id(function(d) {
                  return d.id;
              }) // This provide  the id of a node
              .links(data.links) // and this the list of links
          )
          .force("charge", d3.forceManyBody().strength(-400)) // This adds repulsion between nodes. Play with the -400 for the repulsion strength
          .force("center", d3.forceCenter(width / 2, height / 2)) // This force attracts nodes to the center of the svg area
          .on("end", ticked);

      // This function is run at each iteration of the force algorithm, updating the nodes position.
      function ticked() {
          link
              .attr("x1", function(d) {
                  return d.source.x;
              })
              .attr("y1", function(d) {
                  return d.source.y;
              })
              .attr("x2", function(d) {
                  return d.target.x;
              })
              .attr("y2", function(d) {
                  return d.target.y;
              });

          node
              .attr("cx", function(d) {
                  return d.x + 6;
              })
              .attr("cy", function(d) {
                  return d.y - 6;
              });
      }

  });
</script>

</body>
</html>
